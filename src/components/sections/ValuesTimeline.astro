---
import type { CollectionEntry } from 'astro:content';
import lifestylePhoto3 from '../../assets/images/photos/barber_lifestyle_3.jpg';

export interface Props {
  entries: CollectionEntry<'timeline'>[];
  eyebrow?: string;
  heading: string;
  subheading?: string;
}

const props = Astro.props as Props;
const ordered = [...props.entries].sort((a, b) => Number(a.data.year) - Number(b.data.year));
const bgImage = lifestylePhoto3.src;
---

<section class="relative overflow-hidden bg-surface py-24 sm:py-28 lg:py-32">
  <!-- VISIBLE heritage background image - classic barbershop interior -->
  <div class="absolute inset-0 z-0">
    <img
      src={bgImage}
      alt=""
      class="w-full h-full object-cover object-center opacity-30 dark:opacity-25"
      aria-hidden="true"
    />
  </div>

  <!-- STRONG overlay for perfect text contrast -->
  <div class="absolute inset-0 z-[1] bg-background/65 dark:bg-black/55"></div>

  <!-- Content Container with generous padding -->
  <div class="relative z-10 mx-auto max-w-4xl px-6 sm:px-8 lg:px-10">
    <!-- Rounded container with generous, balanced padding -->
    <div class="bg-surface/90 backdrop-blur-md rounded-2xl px-10 py-14 sm:px-14 sm:py-18 lg:px-16 lg:py-20 shadow-lg">
      <!-- Header Section -->
      <div class="text-center">
        {props.eyebrow && (
          <p class="text-xs font-bold uppercase tracking-[0.45em] text-secondary">{props.eyebrow}</p>
        )}
        <h2 class="mt-4 text-3xl font-bold text-text md:text-4xl lg:text-5xl">{props.heading}</h2>
        {props.subheading && <p class="mt-4 text-lg font-semibold text-text leading-relaxed">{props.subheading}</p>}
      </div>

      <!-- Timeline Section -->
      <div class="mt-20 space-y-12 border-l-2 border-border pl-8 sm:pl-10">
        {ordered.map((entry) => (
          <div class="relative">
            <span class="absolute -left-[42px] sm:-left-[44px] inline-flex h-4 w-4 items-center justify-center rounded-full border-[3px] border-primary bg-surface ring-4 ring-surface/60" />
            <p class="text-xs font-bold uppercase tracking-[0.35em] text-secondary">{entry.data.year}</p>
            <h3 class="mt-3 text-xl font-bold text-text lg:text-2xl">{entry.data.title}</h3>
            <p class="mt-3 font-semibold text-text leading-[1.75]">{entry.data.description}</p>
          </div>
        ))}
      </div>
    </div>
  </div>
</section>
